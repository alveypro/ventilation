import{u as l,b as e}from"./vue-B0d-ytHW.js";import{h as a,c as s}from"./dataService-CQiVhu7t.js";import{a as t}from"./knowledge-B8C_aZ-m.js";import{r as n}from"./markdown-CzqLxzfC.js";import{d as u,r as i,c as o,w as c,f as r,j as d,l as v,F as m,g as f,t as p,k as b,x as h,y,v as g,D as _,u as x,q as k}from"./element-0EaUjS1Y.js";import{_ as w}from"./index-uDOMh21w.js";import"./index-CNMiXLCw.js";import"./vendor-VSpmzgsF.js";const $={class:"disease-detail-page"},P={class:"disease-header"},A={class:"disease-tags"},V={class:"content-section"},j=["innerHTML"],I={class:"content-section"},C={class:"intro"},H={class:"content-section"},z={class:"symptom-list"},F={class:"content-section"},M={class:"cause-list"},T={class:"content-section"},D={class:"diagnosis-list"},L={class:"content-section"},B={class:"badge"},O={class:"content-section"},E={class:"type-tags"},N={class:"content-section"},S={class:"content-section"},q={class:"diagram-toggle"},U=["innerHTML"],G=["innerHTML"],J={class:"content-section"},K={key:0,class:"source-list"},Q=["href"],R={key:1},W={class:"source-meta"},X={key:1,class:"source-empty"},Y={key:0,class:"related-section"},Z={key:0,class:"related-block"},ll={class:"type-tags"},el={key:1,class:"related-block"},al={class:"related-desc"},sl={class:"info-item"},tl={class:"value"},nl={class:"info-item"},ul={class:"value"},il={class:"info-item"},ol=w(u({__name:"DiseaseDetail",setup(u){const w=l(),ol=e(),cl=i({id:0,name:"",severity:"",description:"",symptoms:[],machines:[]}),rl=i(!0),dl=i([]),vl=i([]),ml=o(()=>cl.value.longform?cl.value.longform:["## 一句话定义",cl.value.description||"疾病介绍待完善。","","## 诊断路径",...(cl.value.diagnosis||[]).map(l=>`- ${l}`),"","## 治疗策略",...(cl.value.treatment||[]).map(l=>`- ${l}`),"","## 随访与风险",cl.value.prognosis?`- ${cl.value.prognosis}`:"- 需建立随访节奏。"].join("\\n")),fl=o(()=>{var l,e,a,s;const t=[null==(l=cl.value.symptoms)?void 0:l.length,null==(e=cl.value.causes)?void 0:e.length,null==(a=cl.value.diagnosis)?void 0:a.length,null==(s=cl.value.treatment)?void 0:s.length,cl.value.longform?1:0].filter(Boolean).length;return t>=4?"内容等级 A":t>=2?"内容等级 B":"内容等级 C"}),pl=o(()=>{const l=cl.value.classification||"";return"sleep_apnea"===l?"OSA 以气道阻塞为主，核心指标为 AHI，治疗重点是持续气道正压通气与依从性管理。":"copd"===l?"COPD 为进行性气流受限，建议评估 FEV1 分级与血气指标，必要时进行无创通气支持。":"neuromuscular"===l?"神经肌肉疾病常伴呼吸肌无力，评估 FVC 与夜间通气需求是关键。":"建议结合临床症状、客观指标与合并症，制定分层治疗方案。"}),bl=o(()=>{const l=cl.value.classification||"";return"sleep_apnea"===l?"睡觉时呼吸会反复停一下，越严重越容易白天犯困，用呼吸机能明显改善。":"copd"===l?"慢阻肺会让人越走越喘，按时用药加上呼吸机支持，可以更舒服。":"neuromuscular"===l?"肌肉变弱会让呼吸变浅，呼吸机能帮你省力、睡得更踏实。":"通过检查明确严重程度，配合治疗和生活管理，效果会更好。"}),hl=o(()=>cl.value.sources||[]),yl=o(()=>["内容等级 A：覆盖症状/诊断/治疗/随访等核心要点。","内容等级 B：核心要点较全，部分细节待补充。","内容等级 C：基础概览，需进一步核验。"]),gl=o(()=>{const l=cl.value.classification||"";return"sleep_apnea"===l?["核心指标为 AHI 与低氧负荷。","依从性管理是改善症状的关键。"]:"copd"===l?["肺功能分级影响治疗强度。","急性加重需及时干预与随访。"]:"neuromuscular"===l?["夜间通气支持可改善生活质量。","需结合通气监测数据评估。"]:["建议结合个体情况与随访数据调整方案。"]}),_l=i("values"),xl=o(()=>{const l=cl.value.classification||"";return wl("sleep_apnea"===l?[{label:"AHI",value:80},{label:"ODI",value:65},{label:"T90",value:55}]:"copd"===l?[{label:"FEV1",value:50},{label:"PaO2",value:45},{label:"PaCO2",value:70}]:"neuromuscular"===l?[{label:"FVC",value:40},{label:"夜间低氧",value:60},{label:"通气稳定性",value:55}]:[{label:"症状负担",value:60},{label:"低氧负荷",value:55},{label:"依从性",value:50}])}),kl=o(()=>{const l=cl.value.classification||"";return"sleep_apnea"===l?$l("AHI 分层",[{label:"轻度",value:"5-15"},{label:"中度",value:"15-30"},{label:"重度",value:">30"}]):"copd"===l?$l("FEV1 分层",[{label:"轻度",value:"≥80%"},{label:"中度",value:"50-79%"},{label:"重度",value:"<50%"}]):"neuromuscular"===l?$l("FVC 风险",[{label:"轻度",value:"≥50%"},{label:"中度",value:"30-49%"},{label:"重度",value:"<30%"}]):$l("风险分层",[{label:"低",value:"症状轻"},{label:"中",value:"需评估"},{label:"高",value:"需转诊"}])}),wl=l=>{const e=110;return`\n    <svg viewBox="0 0 420 140" xmlns="http://www.w3.org/2000/svg">\n      <rect x="20" y="20" width="380" height="100" fill="#f8fafc" stroke="#e5e7eb"/>\n      <line x1="30" y1="110" x2="390" y2="110" stroke="#94a3b8"/>\n      ${l.map((l,a)=>{const s=40+108*a,t=Math.max(20,Math.min(70,l.value)),n=e-t;return`\n      <rect x="${s}" y="${n}" width="90" height="${t}" fill="#93c5fd" />\n      <text x="${s}" y="126" font-size="11" fill="#1f2937">${l.label}</text>\n      <text x="${s}" y="${n-6}" font-size="11" fill="#1f2937">${l.value}</text>\n    `}).join("")}\n    </svg>\n  `.trim()},$l=(l,e)=>{const a=360/e.length;return`\n    <svg viewBox="0 0 420 140" xmlns="http://www.w3.org/2000/svg">\n      <rect x="20" y="20" width="380" height="100" fill="#f8fafc" stroke="#e5e7eb"/>\n      <text x="30" y="40" font-size="11" fill="#1f2937">${l}</text>\n      ${e.map((l,e)=>{const s=30+e*a;return`\n      <rect x="${s}" y="50" width="${a}" height="50" fill="#e0e7ff" stroke="#c7d2fe"/>\n      <text x="${s+10}" y="75" font-size="11" fill="#1f2937">${l.label}</text>\n      <text x="${s+10}" y="95" font-size="11" fill="#4b5563">${l.value}</text>\n    `}).join("")}\n    </svg>\n  `.trim()};c(()=>w.params.id,()=>{const l=parseInt(w.params.id);rl.value=!0,a(l).then(l=>{l&&(cl.value=l),rl.value=!1})},{immediate:!0});c(()=>cl.value.id,()=>{cl.value.id&&(async()=>{const[l]=await Promise.all([s()]),e=t(cl.value,{tutorials:l,reviews:[],products:[],brands:[]});dl.value=e.tutorials,vl.value=Pl(cl.value.classification||"")})()});const Pl=l=>({sleep_apnea:["CPAP/APAP","双水平PAP（高压不耐受）","面罩与配件优化"],copd:["家用NIV（ST）","氧疗支持","肺康复配合"],neuromuscular:["家用NIV（目标通气）","咳嗽辅助","夜间监测"],ohs:["PAP或NIV","体重管理","随访评估"],csa:["专业评估后通气支持","原发病管理"],uars:["PAP治疗","气道通畅管理"]}[l]||["PAP或NIV评估","随访管理"]);return(l,e)=>{const a=v("el-skeleton"),s=v("el-breadcrumb-item"),t=v("el-breadcrumb"),u=v("el-tag"),i=v("el-card"),o=v("el-col"),c=v("el-row"),w=v("el-tab-pane"),wl=v("el-alert"),$l=v("el-radio-button"),Pl=v("el-radio-group"),Al=v("el-collapse-item"),Vl=v("el-collapse"),jl=v("el-tabs");return k(),r("div",$,[rl.value?(k(),d(a,{key:0,rows:8})):(k(),r(m,{key:1},[f(t,{separator:"/"},{default:b(()=>[f(s,{to:{name:"Diseases"}},{default:b(()=>[...e[1]||(e[1]=[h("疾病指南",-1)])]),_:1}),f(s,null,{default:b(()=>[h(y(cl.value.name),1)]),_:1})]),_:1}),p("div",P,[p("h1",null,y(cl.value.name),1),p("div",A,[f(u,{type:"info"},{default:b(()=>[h(y(cl.value.severity),1)]),_:1}),f(u,{type:"success"},{default:b(()=>[h(y(fl.value),1)]),_:1}),f(u,null,{default:b(()=>[h("患病人数："+y(cl.value.prevalence||"—"),1)]),_:1})])]),f(c,{gutter:20,class:"dual-summary"},{default:b(()=>[f(o,{xs:24,md:12},{default:b(()=>[f(i,{shadow:"hover",class:"summary-card"},{default:b(()=>[e[2]||(e[2]=p("h3",null,"专业解读",-1)),p("p",null,y(pl.value),1)]),_:1})]),_:1}),f(o,{xs:24,md:12},{default:b(()=>[f(i,{shadow:"hover",class:"summary-card plain"},{default:b(()=>[e[3]||(e[3]=p("h3",null,"通俗解读",-1)),p("p",null,y(bl.value),1)]),_:1})]),_:1})]),_:1}),f(i,{shadow:"hover",class:"evidence-card"},{default:b(()=>[e[4]||(e[4]=p("h3",null,"内容等级说明",-1)),p("ul",null,[(k(!0),r(m,null,g(yl.value,l=>(k(),r("li",{key:l},y(l),1))),128))])]),_:1}),f(c,{gutter:20},{default:b(()=>[f(o,{xs:24,md:18},{default:b(()=>[f(jl,null,{default:b(()=>[f(w,{label:"完整长文"},{default:b(()=>[p("div",V,[p("div",{class:"longform-content",innerHTML:x(n)(ml.value)},null,8,j)])]),_:1}),f(w,{label:"疾病概览"},{default:b(()=>[p("div",I,[p("p",C,y(cl.value.description),1)])]),_:1}),f(w,{label:"症状和表现"},{default:b(()=>[p("div",H,[e[6]||(e[6]=p("h3",null,"常见症状",-1)),p("ul",z,[(k(!0),r(m,null,g(cl.value.symptoms,(l,a)=>(k(),r("li",{key:a},[e[5]||(e[5]=p("span",{class:"inline-icon symptom-icon"},"⚠️",-1)),p("span",null,y(l),1)]))),128))])])]),_:1}),f(w,{label:"发病原因"},{default:b(()=>[p("div",F,[e[8]||(e[8]=p("h3",null,"主要病因",-1)),p("ul",M,[(k(!0),r(m,null,g(cl.value.causes||[],(l,a)=>(k(),r("li",{key:a},[e[7]||(e[7]=p("span",{class:"inline-icon cause-icon"},"ℹ️",-1)),p("span",null,y(l),1)]))),128))])])]),_:1}),f(w,{label:"诊断方法"},{default:b(()=>[p("div",T,[e[9]||(e[9]=p("h3",null,"检查诊断",-1)),p("ol",D,[(k(!0),r(m,null,g(cl.value.diagnosis||[],(l,e)=>(k(),r("li",{key:e},y(l),1))),128))])])]),_:1}),f(w,{label:"治疗方案"},{default:b(()=>[p("div",L,[e[10]||(e[10]=p("h3",null,"治疗方法",-1)),(k(!0),r(m,null,g(cl.value.treatment||[],(l,e)=>(k(),r("div",{class:"treatment-item",key:e},[p("span",B,y(e+1),1),p("span",null,y(l),1)]))),128))])]),_:1}),f(w,{label:"推荐设备类型"},{default:b(()=>[p("div",O,[p("div",E,[(k(!0),r(m,null,g(vl.value,l=>(k(),d(u,{key:l,size:"small",type:"success"},{default:b(()=>[h(y(l),1)]),_:2},1024))),128))])])]),_:1}),f(w,{label:"并发症"},{default:b(()=>[p("div",N,[e[11]||(e[11]=p("h3",null,"可能的并发症",-1)),(k(!0),r(m,null,g(cl.value.complications||[],(l,e)=>(k(),d(wl,{key:e,title:l,type:"warning",closable:!1,style:{"margin-bottom":"10px"}},null,8,["title"]))),128))])]),_:1}),f(w,{label:"指标图谱"},{default:b(()=>[p("div",S,[e[14]||(e[14]=p("h3",null,"核心指标图谱",-1)),p("div",q,[f(Pl,{modelValue:_l.value,"onUpdate:modelValue":e[0]||(e[0]=l=>_l.value=l),size:"small"},{default:b(()=>[f($l,{label:"values"},{default:b(()=>[...e[12]||(e[12]=[h("指标示意",-1)])]),_:1}),f($l,{label:"tiers"},{default:b(()=>[...e[13]||(e[13]=[h("分层阈值",-1)])]),_:1})]),_:1},8,["modelValue"])]),"values"===_l.value?(k(),r("div",{key:0,class:"diagram-frame",innerHTML:xl.value},null,8,U)):_("",!0),"tiers"===_l.value?(k(),r("div",{key:1,class:"diagram-frame",innerHTML:kl.value},null,8,G)):_("",!0),e[15]||(e[15]=p("p",{class:"diagram-note"},"图谱用于理解指标重点，具体阈值需结合临床评估。",-1))])]),_:1}),f(w,{label:"参考资料"},{default:b(()=>[p("div",J,[e[16]||(e[16]=p("h3",null,"参考资料",-1)),hl.value.length?(k(),r("ul",K,[(k(!0),r(m,null,g(hl.value,l=>(k(),r("li",{key:`${l.title}-${l.org}`},[l.url?(k(),r("a",{key:0,href:l.url,target:"_blank",rel:"noopener"},y(l.title),9,Q)):(k(),r("span",R,y(l.title),1)),p("span",W," · "+y(l.org)+" · "+y(l.date||"—"),1)]))),128))])):(k(),r("p",X,"暂无来源补充")),gl.value.length?(k(),d(Vl,{key:2,class:"evidence-summary"},{default:b(()=>[f(Al,{title:"摘要要点",name:"summary"},{default:b(()=>[p("ul",null,[(k(!0),r(m,null,g(gl.value,l=>(k(),r("li",{key:l},y(l),1))),128))])]),_:1})]),_:1})):_("",!0)])]),_:1})]),_:1}),vl.value.length||dl.value.length?(k(),r("div",Y,[e[19]||(e[19]=p("h3",null,"相关内容推荐",-1)),vl.value.length?(k(),r("div",Z,[e[17]||(e[17]=p("h4",null,"推荐设备类型",-1)),p("div",ll,[(k(!0),r(m,null,g(vl.value,l=>(k(),d(u,{key:l,size:"small",type:"success"},{default:b(()=>[h(y(l),1)]),_:2},1024))),128))])])):_("",!0),dl.value.length?(k(),r("div",el,[e[18]||(e[18]=p("h4",null,"推荐教程",-1)),f(c,{gutter:16},{default:b(()=>[(k(!0),r(m,null,g(dl.value,l=>(k(),d(o,{xs:24,sm:12,key:l.id},{default:b(()=>[f(i,{shadow:"hover",class:"related-card",onClick:e=>{return a=l.id,void ol.push(`/tutorial/${a}`);var a}},{default:b(()=>[p("h5",null,y(l.title),1),p("p",al,y(l.difficulty)+" · "+y(l.duration),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):_("",!0)])):_("",!0)]),_:1}),f(o,{xs:24,md:6},{default:b(()=>[f(i,{class:"info-card"},{header:b(()=>[...e[20]||(e[20]=[p("div",{class:"card-header"},[p("span",null,"疾病概况")],-1)])]),default:b(()=>[p("div",sl,[e[21]||(e[21]=p("span",{class:"label"},"患病人数",-1)),p("span",tl,y(cl.value.prevalence),1)]),p("div",nl,[e[22]||(e[22]=p("span",{class:"label"},"疾病级别",-1)),p("span",ul,y(cl.value.severity),1)]),p("div",il,[e[23]||(e[23]=p("span",{class:"label"},"诊断方法",-1)),(k(!0),r(m,null,g((cl.value.diagnosis||[]).slice(0,2),(l,e)=>(k(),d(u,{key:e,size:"small"},{default:b(()=>[h(y(l),1)]),_:2},1024))),128))]),e[24]||(e[24]=p("div",{class:"info-item"},[p("span",{class:"label"},"治疗周期"),p("span",{class:"value"},"长期治疗")],-1))]),_:1}),f(i,{class:"info-card",style:{"margin-top":"20px"}},{header:b(()=>[...e[25]||(e[25]=[p("div",{class:"card-header"},[p("span",null,"预后情况")],-1)])]),default:b(()=>[p("p",null,y(cl.value.prognosis),1)]),_:1})]),_:1})]),_:1})],64))])}}}),[["__scopeId","data-v-a06ebb84"]]);export{ol as default};
