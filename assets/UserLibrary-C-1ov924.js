import{b as e}from"./vue-B0d-ytHW.js";import{l,s as a}from"./storage-CA1yM9sP.js";import{p as t}from"./public-user-library-BzewmXVh.js";import{d as s,r as o,c as i,f as u,t as r,g as d,y as n,k as c,F as p,v,l as m,j as y,u as h,D as f,x as k,I as b,q as g}from"./element-0EaUjS1Y.js";import{_}from"./index-uDOMh21w.js";const w={class:"user-library-page"},V={class:"page-header handbook"},S={class:"learning-path"},x={class:"path-top"},C={class:"path-desc"},U={class:"path-steps"},A={class:"troubleshoot-tree"},z={class:"tree-grid"},B={class:"tree-header"},j={class:"tree-icon"},P={class:"tree-desc"},T={class:"tree-steps"},O={class:"quick-tests"},L={class:"tree-grid"},N={class:"tree-header"},$={class:"tree-icon"},E={class:"tree-desc"},G={class:"history-section"},I={class:"filter-row"},q={class:"summary"},D={key:0,class:"points"},F={class:"meta"},M={key:3,class:"source"},H={class:"ess-grid"},J={class:"dialog-footer"},K={key:0,class:"result-box"},Q={class:"ess-grid"},R={class:"dialog-footer"},W={key:0,class:"result-box"},X="assessment-history",Y=_(s({__name:"UserLibrary",setup(s){const _=o(""),Y=o(""),Z=o(""),ee=o(""),le=Array.from(new Set(t.map(e=>e.category).filter(Boolean))),ae=Array.from(new Set(t.map(e=>e.level).filter(Boolean))),te=Array.from(new Set(t.map(e=>e.docType).filter(Boolean))),se=e(),oe=o(l(X,[])),ie=["ÂùêÁùÄÈòÖËØªÊó∂","ÁúãÁîµËßÜÊó∂","Âú®ÂÖ¨ÂÖ±Âú∫ÊâÄÂÆâÈùôÂùêÁùÄÊó∂","ÈïøÊó∂Èó¥‰πòËΩ¶Êó∂","‰∏ãÂçà‰ºëÊÅØË∫∫ÁùÄÊó∂","‰∏é‰∫∫‰∫§Ë∞àÊó∂","ÂçàÈ§êÂêéÂÆâÈùôÂùêÁùÄÊó∂","ÂºÄËΩ¶Á≠âÁ∫¢ÁÅØÊó∂"],ue=o(Array(8).fill(0)),re=o(null),de=o(!1),ne=["ÊâìÈºæÂ£∞Èü≥Â§ß‰∏îÊåÅÁª≠ÂêóÔºü","ÁôΩÂ§©ÊòØÂê¶ÂóúÁù°ÊàñÁñ≤ÊÉ´Ôºü","‰ªñ‰∫∫ÊòØÂê¶ËßÇÂØüÂà∞ÂëºÂê∏ÊöÇÂÅúÔºü","ÊòØÂê¶ÊúâÈ´òË°ÄÂéãÊàñÂøÉË°ÄÁÆ°ÈóÆÈ¢òÔºü","BMI ÊòØÂê¶ ‚â• 35Ôºü","Âπ¥ÈæÑÊòØÂê¶ ‚â• 50 Â≤ÅÔºü","È¢àÂõ¥ÊòØÂê¶ËæÉÁ≤óÔºàÁî∑ ‚â• 40cm / Â•≥ ‚â• 37cmÔºâÔºü","ÊòØÂê¶‰∏∫Áî∑ÊÄßÔºü"],ce=o(Array(8).fill(!1)),pe=o(null),ve=o(!1),me=[{key:"ess",icon:"üß≠",title:"ESS ÂóúÁù°ÈáèË°®",description:"ËØÑ‰º∞ÁôΩÂ§©ÂóúÁù°Á®ãÂ∫¶„ÄÇ",path:"/patient"},{key:"stop",icon:"üìè",title:"STOP-BANG",description:"ËØÑ‰º∞ OSA È£éÈô©Á≠âÁ∫ß„ÄÇ",path:"/patient"},{key:"sleep",icon:"üìù",title:"Áù°Áú†ËÆ∞ÂΩïË°®",description:"ËÆ∞ÂΩïÁù°Áú†‰∏é‰ΩøÁî®Êó∂Èïø„ÄÇ",path:"/patient"}],ye=[{icon:"ü´ß",title:"ÊºèÊ∞îÈóÆÈ¢ò",description:"ÂÖàÊ£ÄÊü•Èù¢ÁΩ©ÂØÜÂ∞Å‰∏éÊùæÁ¥ßÂ∫¶ÔºåÊºèÊ∞îÊòØÊúÄÂ∏∏ËßÅÂéüÂõ†„ÄÇ",steps:["Ê£ÄÊü•Èù¢ÁΩ©‰Ω©Êà¥","Ë∞ÉÊï¥ÊùæÁ¥ßÂ∫¶","Êõ¥Êç¢Èù¢ÁΩ©Á±ªÂûã"],keywords:"ÊºèÊ∞î Èù¢ÁΩ©"},{icon:"üòÆ‚Äçüí®",title:"Âè£Âπ≤‰∏éÂπ≤Áá•",description:"‰ºòÂÖàÊ£ÄÊü•ÊπøÂåñ‰∏éÂè£ÂëºÂê∏ÔºåÂÜçÁúãÂéãÂäõËÆæÁΩÆ„ÄÇ",steps:["ÊπøÂåñËÆæÁΩÆ","Âè£ÂëºÂê∏ÊéßÂà∂","ËÄÉËôëÂÖ®Èù¢ÁΩ©"],keywords:"ÊπøÂåñ Âè£Âπ≤"},{icon:"üîä",title:"Âô™Èü≥Âõ∞Êâ∞",description:"ÊéíÊü•ÁÆ°Ë∑ØÊºèÊ∞î„ÄÅ‰ΩçÁΩÆ‰∏éËÆæÂ§áËøêË°åÁä∂ÊÄÅ„ÄÇ",steps:["Ê£ÄÊü•ÁÆ°Ë∑Ø","Ë∞ÉÊï¥ÊëÜÊîæ","Á°ÆËÆ§Êª§ÁΩë"],keywords:"Âô™Èü≥ ÊºèÊ∞î"},{icon:"‚öôÔ∏è",title:"ÂèÇÊï∞‰∏çÈÄÇ",description:"ÂÖàÊéíÈô§ËÆæÂ§á‰∏éÈù¢ÁΩ©ÈóÆÈ¢òÔºåÂÜçËÆ®ËÆ∫ÂèÇÊï∞Ë∞ÉÊï¥„ÄÇ",steps:["Á°ÆËÆ§‰ΩøÁî®‰π†ÊÉØ","ËÆ∞ÂΩï‰∏çÈÄÇ","Â§çËØÑÂèÇÊï∞"],keywords:"ÂèÇÊï∞ Ë∞ÉÊï¥"}],he=[{title:"ÂÖ•Èó®‰∏éÂà§Êñ≠",tag:"ÂÖàÂºÑÊ∏Ö",description:"ÂÖàÂàÜÊ∏ÖÊâìÈºæ‰∏é OSAÔºåÂÜçÁêÜËß£Êä•Âëä‰∏éËØäÊñ≠ÊµÅÁ®ã„ÄÇ",steps:["ÂÖàÂÅöÁ≠õÊü•ÊàñÁõëÊµã","ÊåâÊåáÊ†áÂà§Êñ≠‰∏•ÈáçÂ∫¶","Á°ÆËÆ§ÊòØÂê¶ÈúÄË¶ÅÁî®Êú∫"]},{title:"ÈÄâË¥≠‰∏éÈÄÇÂ∫î",tag:"ÂÖàËàíÊúç",description:"ÈÄâÂØπÊú∫Âûã‰∏éÈù¢ÁΩ©ÔºåÁ¨¨‰∏ÄÂë®ÈáçÁÇπÊòØËàíÈÄÇ‰∏é‰π†ÊÉØ„ÄÇ",steps:["Êú∫Âûã‰∏éÈù¢ÁΩ©ÂåπÈÖç","ÊπøÂåñ‰∏éÁù°Âßø‰ºòÂåñ","7 Â§©ÈÄÇÂ∫îËÆ°Âàí"]},{title:"ÈóÆÈ¢òÂ§ÑÁêÜ",tag:"ÂÖàÊéíÊü•",description:"‰∏çÈÄÇÂ§ßÂ§öÂèØË∞ÉÊï¥Ôºå‰ºòÂÖàÊéíÊü•ÊºèÊ∞î‰∏éËÆæÁΩÆ„ÄÇ",steps:["ÊºèÊ∞î‰∏éÂè£Âπ≤Â§ÑÁêÜ","ÂéãÂäõ‰∏çÈÄÇÊ≤üÈÄö","ÂøÖË¶ÅÊó∂Â§çËØÑ"]},{title:"ÈïøÊúüÁÆ°ÁêÜ",tag:"ÂÖàÁ®≥ÂÆö",description:"ÂÖ≥Ê≥®ÈöèËÆø„ÄÅÁîüÊ¥ªÊñπÂºè‰∏éÂêàÂπ∂ÁóáÔºåÁ®≥‰ΩèÈïøÊúüÊïàÊûú„ÄÇ",steps:["ÂÆöÊúüÈöèËÆøËÆ∞ÂΩï","‰ΩúÊÅØ‰∏é‰ΩìÈáçÁÆ°ÁêÜ","ÂêàÂπ∂ÁóáÈ£éÈô©ÊéßÂà∂"]}],fe=i(()=>{const e=_.value.trim().toLowerCase();return t.filter(l=>{const a=!e||`${l.title} ${l.summary} ${(l.keywords||[]).join(" ")}`.toLowerCase().includes(e),t=!Y.value||l.category===Y.value,s=!Z.value||l.level===Z.value,o=!ee.value||l.docType===ee.value;return a&&t&&s&&o})}),ke=(e,l,t)=>{const s=[{type:e,score:l,label:t,at:(new Date).toLocaleString()},...oe.value].slice(0,10);oe.value=s,a(X,s)},be=()=>{if(ue.value.some(e=>null==e))return void b.warning("ËØ∑ÂÆåÊàêÊâÄÊúâÈ¢òÁõÆÂÜçËÆ°ÁÆó");const e=ue.value.reduce((e,l)=>e+(Number(l)||0),0);let l="Ê≠£Â∏∏ËåÉÂõ¥";e>=11&&e<=14&&(l="ËΩªÂ∫¶ÂóúÁù°"),e>=15&&e<=17&&(l="‰∏≠Â∫¶ÂóúÁù°"),e>=18&&(l="ÈáçÂ∫¶ÂóúÁù°"),re.value={score:e,label:l},ke("ESS ÂóúÁù°ÈáèË°®",e,l)},ge=()=>{const e=ce.value.filter(Boolean).length;let l="‰ΩéÈ£éÈô©";e>=3&&e<=4&&(l="‰∏≠Á≠âÈ£éÈô©"),e>=5&&(l="È´òÈ£éÈô©"),pe.value={score:e,label:l},ke("STOP-BANG ÈáèË°®",e,l)};return(e,l)=>{const a=m("el-tag"),t=m("el-card"),s=m("el-col"),o=m("el-row"),i=m("el-button"),b=m("el-empty"),X=m("el-table-column"),ke=m("el-table"),_e=m("el-input"),we=m("el-option"),Ve=m("el-select"),Se=m("el-dialog"),xe=m("el-switch");return g(),u("div",w,[r("div",V,[l[8]||(l[8]=r("p",{class:"header-label"},"Áî®Êà∑Áü•ËØÜÂ∫ì",-1)),l[9]||(l[9]=r("h1",null,"‰ΩøÁî®‰∏éÈóÆÈ¢òÂ§ÑÁêÜÊåáÂçó",-1)),r("p",null,"ÂÖ¨ÂºÄÁâàÁü•ËØÜÊï¥ÁêÜÔºàÂÖ± "+n(fe.value.length)+" Êù°Ôºâ„ÄÇ",1)]),r("section",S,[l[10]||(l[10]=r("div",{class:"path-header"},[r("h2",null,"Â≠¶‰π†Ë∑ØÂæÑ"),r("p",null,"‰ªéÂÖ•Èó®Âà∞ÈïøÊúüÁÆ°ÁêÜÁöÑÊúÄÁü≠Ë∑ØÁ∫øÔºåÂÖàÁúãÈáçÁÇπÂÜçÊ∑±ÂÖ•ÁªÜËäÇ„ÄÇ")],-1)),d(o,{gutter:16},{default:c(()=>[(g(),u(p,null,v(he,e=>d(s,{xs:24,md:12,key:e.title},{default:c(()=>[d(t,{class:"path-card"},{default:c(()=>[r("div",x,[r("h3",null,n(e.title),1),d(a,{size:"small",type:"info"},{default:c(()=>[k(n(e.tag),1)]),_:2},1024)]),r("p",C,n(e.description),1),r("ul",U,[(g(!0),u(p,null,v(e.steps,e=>(g(),u("li",{key:e},n(e),1))),128))])]),_:2},1024)]),_:2},1024)),64))]),_:1})]),r("section",A,[l[12]||(l[12]=r("div",{class:"path-header"},[r("h2",null,"ÈóÆÈ¢òÊéíÊü•Ê†ë"),r("p",null,"‰ªéÊºèÊ∞îÂºÄÂßãÈÄêÂ±ÇÊéíÊü•Ôºå‰ºòÂÖàÂ§ÑÁêÜÈù¢ÁΩ©‰∏éÊπøÂåñÔºåÂÜçËÄÉËôëÂèÇÊï∞„ÄÇ")],-1)),r("div",z,[(g(),u(p,null,v(ye,e=>d(t,{key:e.title,shadow:"hover",class:"tree-card"},{default:c(()=>[r("div",B,[r("span",j,n(e.icon),1),r("h3",null,n(e.title),1)]),r("p",P,n(e.description),1),r("div",T,[(g(!0),u(p,null,v(e.steps,e=>(g(),u("span",{key:e,class:"tree-step"},n(e),1))),128))]),d(i,{text:"",type:"primary",onClick:l=>(e=>{_.value=e.keywords||e.title||""})(e)},{default:c(()=>[...l[11]||(l[11]=[k("Êü•ÁúãÁõ∏ÂÖ≥ÂÜÖÂÆπ ‚Üí",-1)])]),_:1},8,["onClick"])]),_:2},1024)),64))])]),r("section",O,[l[14]||(l[14]=r("div",{class:"path-header"},[r("h2",null,"Âø´ÈÄüËá™ÊµãÂÖ•Âè£"),r("p",null,"ÂÖàÂÅöÁ≠õÊü•ÂÜçÂÜ≥Á≠ñÔºåÂáèÂ∞ëÁõ≤ÁõÆÈÄâÊú∫‰∏éË∞ÉÂèÇ„ÄÇ")],-1)),r("div",L,[(g(),u(p,null,v(me,e=>d(t,{key:e.title,shadow:"hover",class:"tree-card"},{default:c(()=>[r("div",N,[r("span",$,n(e.icon),1),r("h3",null,n(e.title),1)]),r("p",E,n(e.description),1),d(i,{text:"",type:"primary",onClick:l=>{var a;"ess"!==(a=e.key)?"stop"!==a?se.push("/patient"):ve.value=!0:de.value=!0}},{default:c(()=>[...l[13]||(l[13]=[k("Á´ãÂç≥ËøõÂÖ• ‚Üí",-1)])]),_:1},8,["onClick"])]),_:2},1024)),64))])]),r("section",G,[l[15]||(l[15]=r("div",{class:"path-header"},[r("h2",null,"ËØÑ‰º∞ËÆ∞ÂΩï"),r("p",null,"ÊúÄËøë 10 Ê¨°Ëá™ÊµãÁªìÊûúÔºå‰æø‰∫éÂõûÁúãÂèòÂåñ„ÄÇ")],-1)),oe.value.length?(g(),y(ke,{key:1,data:oe.value,size:"small",stripe:""},{default:c(()=>[d(X,{prop:"type",label:"Á±ªÂûã","min-width":"120"}),d(X,{prop:"score",label:"ÂæóÂàÜ","min-width":"100"}),d(X,{prop:"label",label:"Ëß£ËØª","min-width":"200"}),d(X,{prop:"at",label:"Êó∂Èó¥","min-width":"180"})]),_:1},8,["data"])):(g(),y(b,{key:0,description:"ÊöÇÊó†ËÆ∞ÂΩï"}))]),d(t,{class:"filters"},{default:c(()=>[r("div",I,[d(_e,{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=e=>_.value=e),placeholder:"ÊêúÁ¥¢Áî®Êà∑Áü•ËØÜ",clearable:""},null,8,["modelValue"]),d(Ve,{modelValue:Y.value,"onUpdate:modelValue":l[1]||(l[1]=e=>Y.value=e),placeholder:"ÂàÜÁ±ª",clearable:""},{default:c(()=>[(g(!0),u(p,null,v(h(le),e=>(g(),y(we,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(Ve,{modelValue:Z.value,"onUpdate:modelValue":l[2]||(l[2]=e=>Z.value=e),placeholder:"Á≠âÁ∫ß",clearable:""},{default:c(()=>[(g(!0),u(p,null,v(h(ae),e=>(g(),y(we,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(Ve,{modelValue:ee.value,"onUpdate:modelValue":l[3]||(l[3]=e=>ee.value=e),placeholder:"Á±ªÂûã",clearable:""},{default:c(()=>[(g(!0),u(p,null,v(h(te),e=>(g(),y(we,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),d(o,{gutter:20},{default:c(()=>[(g(!0),u(p,null,v(fe.value,e=>(g(),y(s,{xs:24,md:12,key:e.id},{default:c(()=>[d(t,{shadow:"hover",class:"library-card clickable",onClick:l=>{return a=e.id,void se.push(`/user-knowledge/${a}`);var a}},{default:c(()=>{var t;return[r("h3",null,n(e.title),1),r("p",q,n(e.summary),1),(null==(t=e.keyPoints)?void 0:t.length)?(g(),u("ul",D,[(g(!0),u(p,null,v(e.keyPoints,e=>(g(),u("li",{key:e},n(e),1))),128))])):f("",!0),r("div",F,[d(a,{size:"small",type:"success"},{default:c(()=>[...l[16]||(l[16]=[k("Áî®Êà∑",-1)])]),_:1}),e.category?(g(),y(a,{key:0,size:"small",type:"warning"},{default:c(()=>[k(n(e.category),1)]),_:2},1024)):f("",!0),e.level?(g(),y(a,{key:1,size:"small",type:"primary"},{default:c(()=>[k(n(e.level),1)]),_:2},1024)):f("",!0),e.docType?(g(),y(a,{key:2,size:"small",type:"danger"},{default:c(()=>[k(n(e.docType),1)]),_:2},1024)):f("",!0),(g(!0),u(p,null,v(e.keywords||[],e=>(g(),y(a,{key:e,size:"small",type:"info"},{default:c(()=>[k(n(e),1)]),_:2},1024))),128)),e.sourcePath?(g(),u("span",M,n(e.sourcePath),1)):f("",!0)])]}),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),d(Se,{modelValue:de.value,"onUpdate:modelValue":l[5]||(l[5]=e=>de.value=e),title:"ESS ÂóúÁù°ÈáèË°®",width:"520px"},{footer:c(()=>[r("div",J,[d(i,{onClick:l[4]||(l[4]=e=>de.value=!1)},{default:c(()=>[...l[17]||(l[17]=[k("ÂÖ≥Èó≠",-1)])]),_:1}),d(i,{type:"primary",onClick:be},{default:c(()=>[...l[18]||(l[18]=[k("ËÆ°ÁÆóÂæóÂàÜ",-1)])]),_:1})])]),default:c(()=>[l[19]||(l[19]=r("p",{class:"dialog-note"},"ËØ∑Ê†πÊçÆÊúÄËøë‰∏ÄÂë®ÁöÑÂÆûÈôÖÊÉÖÂÜµÈÄâÊã© 0-3 ÂàÜ„ÄÇ",-1)),r("div",H,[(g(),u(p,null,v(ie,(e,l)=>r("div",{key:e,class:"ess-item"},[r("span",null,n(l+1)+". "+n(e),1),d(Ve,{modelValue:ue.value[l],"onUpdate:modelValue":e=>ue.value[l]=e,size:"small",placeholder:"ËØÑÂàÜ"},{default:c(()=>[(g(),u(p,null,v([0,1,2,3],e=>d(we,{key:e,label:String(e),value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue","onUpdate:modelValue"])])),64))]),re.value?(g(),u("div",K,[r("strong",null,"ÊÄªÂàÜÔºö"+n(re.value.score),1),k("Ôºå"+n(re.value.label),1)])):f("",!0)]),_:1},8,["modelValue"]),d(Se,{modelValue:ve.value,"onUpdate:modelValue":l[7]||(l[7]=e=>ve.value=e),title:"STOP-BANG ÈáèË°®",width:"520px"},{footer:c(()=>[r("div",R,[d(i,{onClick:l[6]||(l[6]=e=>ve.value=!1)},{default:c(()=>[...l[20]||(l[20]=[k("ÂÖ≥Èó≠",-1)])]),_:1}),d(i,{type:"primary",onClick:ge},{default:c(()=>[...l[21]||(l[21]=[k("ËÆ°ÁÆóÁªìÊûú",-1)])]),_:1})])]),default:c(()=>[l[22]||(l[22]=r("p",{class:"dialog-note"},"Ê†πÊçÆ‚ÄúÊòØ/Âê¶‚ÄùÂõûÁ≠î‰ª•‰∏ãÈóÆÈ¢ò„ÄÇ",-1)),r("div",Q,[(g(),u(p,null,v(ne,(e,l)=>r("div",{key:e,class:"ess-item"},[r("span",null,n(l+1)+". "+n(e),1),d(xe,{modelValue:ce.value[l],"onUpdate:modelValue":e=>ce.value[l]=e,"active-text":"ÊòØ","inactive-text":"Âê¶"},null,8,["modelValue","onUpdate:modelValue"])])),64))]),pe.value?(g(),u("div",W,[r("strong",null,"ÊÄªÂàÜÔºö"+n(pe.value.score),1),k("Ôºå"+n(pe.value.label),1)])):f("",!0)]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d5830814"]]);export{Y as default};
