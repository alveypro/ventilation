import{u as l,b as e}from"./vue-B0d-ytHW.js";import{c as a,i as s,f as t,b as u,d as i}from"./dataService-CQiVhu7t.js";import{b as d}from"./knowledge-B8C_aZ-m.js";import{f as r}from"./helpers-DDI8N1dV.js";import{r as n}from"./markdown-CzqLxzfC.js";import{d as c,r as o,w as v,C as m,c as p,f,j as h,l as k,F as y,g as b,t as _,k as g,x as w,y as x,D as C,u as $,v as j,I as z,q as L}from"./element-0EaUjS1Y.js";import{_ as T}from"./index-uDOMh21w.js";import"./index-CNMiXLCw.js";import"./vendor-VSpmzgsF.js";const D={class:"tutorial-detail-page"},I={class:"tutorial-header"},P={class:"tutorial-meta"},q={class:"duration"},F={class:"views"},H=["innerHTML"],M={key:0,class:"tutorial-images"},A=["src","alt"],E={class:"tutorial-feedback"},Q={key:0,class:"related-tutorials"},S={class:"meta"},B={class:"duration"},G={key:1,class:"related-block"},J={class:"meta"},K={class:"duration"},N={key:2,class:"related-block"},O={class:"meta"},R={class:"sidebar-item"},U={class:"sidebar-item"},V={class:"value"},W={class:"sidebar-item"},X={class:"value"},Y={class:"sidebar-item"},Z={key:0,class:"sidebar-item"},ll={class:"value"},el={key:1,class:"sidebar-block"},al={key:2,class:"sidebar-block warning"},sl={key:3,class:"sidebar-block"},tl=["href"],ul={key:1},il={class:"source-meta"},dl={key:4,class:"sidebar-block"},rl={class:"faq-item"},nl=T(c({__name:"TutorialDetail",setup(c){const T=l(),nl=e(),cl=o({id:0,title:"",category:"",difficulty:"",content:""}),ol=o([]),vl=o(!0),ml=o([]),pl=o([]);v(()=>T.params.id,()=>{const l=parseInt(T.params.id);vl.value=!0,s(l).then(l=>{l&&(cl.value=l),vl.value=!1})},{immediate:!0}),m(async()=>{ol.value=await a()});v(()=>cl.value.id,()=>{cl.value.id&&(async()=>{const[l,e,a]=await Promise.all([t(),u(),i()]),s=d(cl.value,{products:l,diseases:e,tutorials:ol.value,reviews:a});ml.value=s.products,pl.value=s.diseases})()});const fl=p(()=>ol.value.filter(l=>l.category===cl.value.category&&l.id!==cl.value.id).slice(0,2)),hl=p(()=>{const l=`${cl.value.title} ${cl.value.content}`.toLowerCase(),e=["遵循医生处方参数，不建议自行大幅调压。"];return(l.includes("清洁")||l.includes("维护"))&&e.push("清洁频率决定依从性与感染风险。"),(l.includes("压力")||l.includes("cpap"))&&e.push("压力调整建议循序渐进，优先改善舒适度。"),e}),kl=p(()=>{const l=`${cl.value.title} ${cl.value.content}`.toLowerCase(),e=[];return(l.includes("酒精")||l.includes("安眠药"))&&e.push("避免饮酒或自行使用安眠药以免加重呼吸抑制。"),l.includes("清洁")&&e.push("不要用高温或刺激性清洁剂清洗面罩。"),e}),yl=p(()=>cl.value.sources||[]),bl=p(()=>{const l=`${cl.value.title} ${cl.value.content}`.toLowerCase();return l.includes("清洁")?["定期清洁可降低感染风险并延长设备寿命。"]:l.includes("压力")||l.includes("cpap")?["压力调整应循序渐进并遵循医嘱。"]:["坚持使用与正确设置是效果的关键。"]}),_l=()=>{z.success("感谢您的反馈！")},gl=()=>{z.info("我们会改进内容")};return(l,e)=>{const a=k("el-skeleton"),s=k("el-breadcrumb-item"),t=k("el-breadcrumb"),u=k("el-tag"),i=k("el-rate"),d=k("el-col"),c=k("el-row"),o=k("el-button"),v=k("el-card");return L(),f("div",D,[vl.value?(L(),h(a,{key:0,rows:8})):(L(),f(y,{key:1},[b(t,{separator:"/"},{default:g(()=>[b(s,{to:{name:"Tutorials"}},{default:g(()=>[...e[0]||(e[0]=[w("使用教程",-1)])]),_:1}),b(s,null,{default:g(()=>[w(x(cl.value.title),1)]),_:1})]),_:1}),_("div",I,[_("h1",null,x(cl.value.title),1),_("div",P,[b(u,null,{default:g(()=>[w(x(cl.value.difficulty),1)]),_:1}),_("span",q,"⏱️ "+x(cl.value.duration),1),_("span",F,"👁️ "+x(cl.value.views)+" 次浏览",1),b(i,{"model-value":cl.value.rating||0,disabled:"",size:"small"},null,8,["model-value"])])]),b(c,{gutter:20},{default:g(()=>[b(d,{xs:24,md:18},{default:g(()=>[b(v,null,{default:g(()=>{var l;return[_("div",{class:"tutorial-content",innerHTML:$(n)(cl.value.content)},null,8,H),(null==(l=cl.value.images)?void 0:l.length)?(L(),f("div",M,[e[1]||(e[1]=_("h3",null,"相关图片",-1)),b(c,{gutter:20},{default:g(()=>[(L(!0),f(y,null,j(cl.value.images,(l,e)=>(L(),h(d,{xs:24,sm:12,md:8,key:e},{default:g(()=>[_("img",{src:l,alt:cl.value.title,class:"tutorial-img"},null,8,A)]),_:2},1024))),128))]),_:1})])):C("",!0),_("div",E,[e[4]||(e[4]=_("h3",null,"这篇教程有帮助吗？",-1)),b(o,{type:"primary",onClick:_l},{default:g(()=>[...e[2]||(e[2]=[w("👍 有帮助",-1)])]),_:1}),b(o,{onClick:gl},{default:g(()=>[...e[3]||(e[3]=[w("👎 没帮助",-1)])]),_:1})])]}),_:1}),fl.value.length?(L(),f("div",Q,[e[5]||(e[5]=_("h3",null,"相关教程",-1)),b(c,{gutter:20},{default:g(()=>[(L(!0),f(y,null,j(fl.value,l=>(L(),h(d,{xs:24,sm:12,key:l.id},{default:g(()=>[b(v,{shadow:"hover",class:"related-card",onClick:e=>{return a=l.id,void nl.push(`/tutorial/${a}`);var a}},{default:g(()=>[_("h4",null,x(l.title),1),_("div",S,[b(u,{size:"small"},{default:g(()=>[w(x(l.difficulty),1)]),_:2},1024),_("span",B,x(l.duration),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):C("",!0),ml.value.length?(L(),f("div",G,[e[6]||(e[6]=_("h3",null,"推荐产品",-1)),b(c,{gutter:20},{default:g(()=>[(L(!0),f(y,null,j(ml.value,l=>(L(),h(d,{xs:24,sm:12,key:l.id},{default:g(()=>[b(v,{shadow:"hover",class:"related-card",onClick:e=>{return a=l.id,void nl.push(`/product/${a}`);var a}},{default:g(()=>[_("h4",null,x(l.name),1),_("div",J,[b(u,{size:"small"},{default:g(()=>[w(x(l.type),1)]),_:2},1024),_("span",K,x($(r)(l.price)),1)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):C("",!0),pl.value.length?(L(),f("div",N,[e[7]||(e[7]=_("h3",null,"关联疾病",-1)),b(c,{gutter:20},{default:g(()=>[(L(!0),f(y,null,j(pl.value,l=>(L(),h(d,{xs:24,sm:12,key:l.id},{default:g(()=>[b(v,{shadow:"hover",class:"related-card",onClick:e=>{return a=l.id,void nl.push(`/disease/${a}`);var a}},{default:g(()=>[_("h4",null,x(l.name),1),_("div",O,[b(u,{size:"small"},{default:g(()=>[w(x(l.severity),1)]),_:2},1024)])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):C("",!0)]),_:1}),b(d,{xs:24,md:6},{default:g(()=>[b(v,{class:"sidebar-card"},{header:g(()=>[...e[8]||(e[8]=[_("div",{class:"card-header"},[_("span",null,"教程信息")],-1)])]),default:g(()=>[_("div",R,[e[9]||(e[9]=_("span",{class:"label"},"难度等级",-1)),b(u,null,{default:g(()=>[w(x(cl.value.difficulty),1)]),_:1})]),_("div",U,[e[10]||(e[10]=_("span",{class:"label"},"学习时长",-1)),_("span",V,x(cl.value.duration),1)]),_("div",W,[e[11]||(e[11]=_("span",{class:"label"},"浏览次数",-1)),_("span",X,x(cl.value.views),1)]),_("div",Y,[e[12]||(e[12]=_("span",{class:"label"},"用户评分",-1)),b(i,{"model-value":cl.value.rating||0,disabled:"",size:"small"},null,8,["model-value"])]),cl.value.sourcePath?(L(),f("div",Z,[e[13]||(e[13]=_("span",{class:"label"},"来源资料",-1)),_("span",ll,x(cl.value.sourcePath),1)])):C("",!0),b(o,{type:"primary",size:"large",class:"download-btn"},{default:g(()=>[...e[14]||(e[14]=[w(" 📥 下载教程 ",-1)])]),_:1}),hl.value.length?(L(),f("div",el,[e[15]||(e[15]=_("h4",null,"专业提示",-1)),_("ul",null,[(L(!0),f(y,null,j(hl.value,l=>(L(),f("li",{key:l},x(l),1))),128))])])):C("",!0),kl.value.length?(L(),f("div",al,[e[16]||(e[16]=_("h4",null,"安全提示",-1)),_("ul",null,[(L(!0),f(y,null,j(kl.value,l=>(L(),f("li",{key:l},x(l),1))),128))])])):C("",!0),yl.value.length?(L(),f("div",sl,[e[17]||(e[17]=_("h4",null,"参考资料",-1)),_("ul",null,[(L(!0),f(y,null,j(yl.value,l=>(L(),f("li",{key:`${l.title}-${l.org}`},[l.url?(L(),f("a",{key:0,href:l.url,target:"_blank",rel:"noopener"},x(l.title),9,tl)):(L(),f("span",ul,x(l.title),1)),_("span",il," · "+x(l.org)+" · "+x(l.date||"—"),1)]))),128))])])):C("",!0),bl.value.length?(L(),f("div",dl,[e[18]||(e[18]=_("h4",null,"摘要要点",-1)),_("ul",null,[(L(!0),f(y,null,j(bl.value,l=>(L(),f("li",{key:l},x(l),1))),128))])])):C("",!0)]),_:1}),b(v,{class:"sidebar-card",style:{"margin-top":"20px"}},{header:g(()=>[...e[19]||(e[19]=[_("div",{class:"card-header"},[_("span",null,"常见问题")],-1)])]),default:g(()=>[_("div",rl,[e[20]||(e[20]=_("h4",null,"Q: 这个教程适合初学者吗？",-1)),_("p",null,"A: 根据难度等级，"+x("基础"===cl.value.difficulty?"非常适合":"建议有基础使用经验的用户")+"。",1)])]),_:1})]),_:1})]),_:1})],64))])}}}),[["__scopeId","data-v-21f18029"]]);export{nl as default};
