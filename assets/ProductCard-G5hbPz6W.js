import{d as e,r as a,w as l,c as s,l as t,j as o,q as r,k as c,t as u,f as d,D as p,y as i,x as n,g as m,F as v,v as y,E as f}from"./element-0EaUjS1Y.js";import{f as h}from"./helpers-DDI8N1dV.js";import{_ as g}from"./index-uDOMh21w.js";const k={class:"product-header"},_={class:"header-right"},C={class:"product-body"},z={class:"product-image"},b=["src","alt"],w={key:1,class:"placeholder"},P={class:"product-info"},B={class:"product-type"},F={key:0,class:"product-series"},V={key:1,class:"device-tags"},j={class:"rating"},E={class:"count"},T={class:"specs-preview"},x={class:"product-footer"},A={class:"price"},I={key:0,class:"highlights"},D=g(e({__name:"ProductCard",props:{product:{},showCompare:{type:Boolean},compareChecked:{type:Boolean}},emits:["click","detail","toggleCompare"],setup(e,{emit:g}){const D=e,L=g,N=a(Boolean(D.compareChecked)),O=a(!1);l(N,e=>{O.value||L("toggleCompare",D.product.id,e)}),l(()=>D.compareChecked,e=>{O.value=!0,N.value=Boolean(e),O.value=!1});const q=()=>{L("click")},H=()=>{L("detail")},M=s(()=>h(D.product.price)),R=s(()=>{const e=D.product.specs||{};return Object.keys(e).slice(0,2).reduce((a,l)=>(a[l]=e[l],a),{})}),S=s(()=>{var e;return D.product.image||(null==(e=D.product.images)?void 0:e[0])||""}),U=s(()=>{switch(D.product.deviceType){case"PAP_SLEEP":return"睡眠PAP";case"NIV_HOME":return"家用NIV";case"PAP_TRAVEL":return"便携/旅行";default:return""}}),W=s(()=>Boolean(D.product.image&&D.product.image.startsWith("http"))),$=s(()=>Boolean(D.product.specs&&D.product.specs["官方页面"])),G=s(()=>D.product.dataCompleteness||0),J=s(()=>G.value?`完整度 ${G.value}%`:""),K=s(()=>G.value>=85?"success":G.value>=70?"warning":"info"),Q=s(()=>{const e={sleep_apnea:"睡眠呼吸暂停",copd:"慢阻肺",neuromuscular:"神经肌肉",heart_failure:"心衰",ohs:"肥胖低通气",csa:"中枢性呼吸暂停"};return(D.product.suitableFor||[]).slice(0,2).map(a=>e[a]||a)}),X=()=>{};return(a,l)=>{const s=t("el-tag"),h=t("el-checkbox"),g=t("el-rate"),D=t("el-button"),L=t("el-card");return r(),o(L,{shadow:"hover",class:"product-card",onClick:q},{header:c(()=>[u("div",k,[u("h4",null,i(e.product.name),1),u("div",_,[e.product.tag?(r(),o(s,{key:0,type:e.product.tagType},{default:c(()=>[n(i(e.product.tag),1)]),_:1},8,["type"])):p("",!0),e.showCompare?(r(),o(h,{key:1,modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value=e),onChange:f(X,["stop"]),size:"small"},{default:c(()=>[...l[1]||(l[1]=[n(" 对比 ",-1)])]),_:1},8,["modelValue"])):p("",!0)])])]),default:c(()=>{var a,t;return[u("div",C,[u("div",z,[S.value?(r(),d("img",{key:0,src:S.value,alt:e.product.name},null,8,b)):(r(),d("div",w,i(e.product.brand),1))]),u("div",P,[u("p",B,i(e.product.type),1),e.product.series?(r(),d("p",F,i(e.product.series),1)):p("",!0),e.product.deviceType||e.product.platformFamily?(r(),d("div",V,[e.product.deviceType?(r(),o(s,{key:0,size:"small",type:"warning"},{default:c(()=>[n(i(U.value),1)]),_:1})):p("",!0),e.product.platformFamily?(r(),o(s,{key:1,size:"small",type:"info"},{default:c(()=>[n(i(e.product.platformFamily),1)]),_:1})):p("",!0),e.product.platformConfidence?(r(),o(s,{key:2,size:"small",type:"success"},{default:c(()=>[n("归类 "+i(e.product.platformConfidence)+"%",1)]),_:1})):p("",!0),W.value?(r(),o(s,{key:3,size:"small",type:"success"},{default:c(()=>[...l[2]||(l[2]=[n("官方图",-1)])]),_:1})):p("",!0),$.value?(r(),o(s,{key:4,size:"small",type:"info"},{default:c(()=>[...l[3]||(l[3]=[n("官方页",-1)])]),_:1})):p("",!0),J.value?(r(),o(s,{key:5,size:"small",type:K.value},{default:c(()=>[n(i(J.value),1)]),_:1},8,["type"])):p("",!0)])):p("",!0),u("div",j,[m(g,{"model-value":e.product.rating||0,disabled:"",size:"small"},null,8,["model-value"]),u("span",E,"("+i(e.product.reviewCount)+")",1)]),u("div",T,[(r(!0),d(v,null,y(R.value,(e,a)=>(r(),o(s,{key:a,size:"small",type:"info"},{default:c(()=>[n(i(a)+": "+i(e),1)]),_:2},1024))),128))])]),u("div",x,[u("span",A,i(M.value),1),m(D,{type:"primary",size:"small",onClick:f(H,["stop"])},{default:c(()=>[...l[4]||(l[4]=[n("详情",-1)])]),_:1})]),(null==(a=e.product.highlights)?void 0:a.length)||(null==(t=e.product.suitableFor)?void 0:t.length)?(r(),d("div",I,[(r(!0),d(v,null,y(e.product.highlights.slice(0,3),e=>(r(),o(s,{key:e,size:"small"},{default:c(()=>[n(i(e),1)]),_:2},1024))),128)),(r(!0),d(v,null,y(Q.value,e=>(r(),o(s,{key:e,size:"small",type:"success"},{default:c(()=>[n(" 适用 "+i(e),1)]),_:2},1024))),128))])):p("",!0)])]}),_:1})}}}),[["__scopeId","data-v-dcebd0ed"]]);export{D as P};
