import{u as e,b as l}from"./vue-B0d-ytHW.js";import{f as s,c as a}from"./dataService-CQiVhu7t.js";import{c as t}from"./clinical-handbook-BMS4044B.js";import{p as i}from"./public-user-library-BzewmXVh.js";import{t as c}from"./topics-9CXbTYdu.js";import{P as u}from"./ProductCard-G5hbPz6W.js";import{o as n}from"./print-BDDZ0fhB.js";import{d as o,r,c as d,C as v,f as p,t as m,g as h,D as y,y as f,k,l as g,x as _,F as w,v as C,q as j,j as P}from"./element-0EaUjS1Y.js";import{_ as x}from"./index-uDOMh21w.js";import"./index-CNMiXLCw.js";import"./vendor-VSpmzgsF.js";import"./helpers-DDI8N1dV.js";const b={class:"topic-detail"},A={class:"page-header"},D={class:"stat-item"},S={class:"stat-value"},$={class:"stat-item"},z={class:"stat-value"},I={class:"stat-item"},T={class:"stat-value"},B={class:"stat-item"},F={class:"stat-value"},G={class:"action-row"},q={class:"summary-actions"},H={class:"summary-grid"},L={key:0,class:"content-section",id:"topic-products"},N={key:1,class:"content-section",id:"topic-tutorials"},V={class:"excerpt"},U={key:2,class:"content-section",id:"topic-clinical"},E={class:"excerpt"},J={key:3,class:"content-section",id:"topic-user"},K={class:"excerpt"},M=x(o({__name:"TopicDetail",setup(o){const x=e(),M=l(),O=r([]),Q=r([]),R=d(()=>c.find(e=>e.id===x.params.id)),W={osa:{audiences:["睡眠门诊医生","家用呼吸机用户","随访管理团队"],scenarios:["夜间打鼾与白天嗜睡","压力滴定与依从性提升","家庭随访"],devices:["CPAP / APAP","睡眠监测设备","面罩与湿化器"]},copd:{audiences:["呼吸科医生","慢阻肺患者","康复护理团队"],scenarios:["稳定期家庭通气","急性加重期支持","出院随访"],devices:["BiPAP / NIV","血氧监测","高流量氧疗"]},niv:{audiences:["重症医生","呼吸治疗师","护理团队"],scenarios:["急性呼衰支持","拔管过渡","家庭无创通气"],devices:["BiPAP / S/T","面罩","呼吸监测"]},hfnc:{audiences:["ICU 医生","急诊医生","呼吸治疗师"],scenarios:["低氧血症治疗","术后呼吸支持","感染性呼衰"],devices:["HFNC 设备","湿化系统","监测设备"]},"sleep-study":{audiences:["睡眠技师","睡眠医生","睡眠中心团队"],scenarios:["PSG 监测","评分判读","报告输出"],devices:["PSG 设备","G3/Sleepware 软件","传感器"]},mask:{audiences:["家用用户","护理人员","客服支持"],scenarios:["适配与试戴","漏气管理","清洁维护"],devices:["鼻罩/口鼻罩","头带","湿化附件"]},"airway-clearance":{audiences:["康复治疗师","呼吸科医生","护理团队"],scenarios:["排痰管理","气道廓清训练","术后呼吸支持"],devices:["咳痰机","震荡排痰","雾化设备"]},oxygen:{audiences:["家庭用户","慢病管理团队","护理人员"],scenarios:["居家氧疗","夜间监测","慢病随访"],devices:["制氧机","血氧仪","氧疗附件"]},"home-care":{audiences:["家庭用户","随访护士","客服"],scenarios:["依从性管理","设备维护","异常处理"],devices:["家用呼吸机","面罩","随访工具"]}},X=d(()=>R.value&&W[R.value.id]||{audiences:[],scenarios:[],devices:[]}),Y=(e,l,s)=>{const a=l.map(l=>{const s=e[l];return Array.isArray(s)?s.join(" "):s||""}).join(" ").toLowerCase();return s.some(e=>a.includes(e.toLowerCase()))},Z=(e,l=9)=>e.slice(0,l),ee=d(()=>R.value?Z(O.value.filter(e=>Y(e,["name","brand","type","description","highlights"],R.value.keywords))):[]),le=d(()=>R.value?Z(Q.value.filter(e=>Y(e,["title","category","content"],R.value.keywords))):[]),se=d(()=>R.value?Z(t.filter(e=>Y(e,["title","summary","keywords"],R.value.keywords))):[]),ae=d(()=>R.value?Z(i.filter(e=>Y(e,["title","summary","keywords"],R.value.keywords))):[]),te=d(()=>({products:ee.value.length,tutorials:le.value.length,clinical:se.value.length,user:ae.value.length})),ie=e=>{M.push(e)},ce=()=>{if(!R.value)return;const e=[{title:"核心人群",items:X.value.audiences},{title:"典型场景",items:X.value.scenarios},{title:"关键设备",items:X.value.devices},{title:"推荐产品",items:ee.value.map(e=>e.name)},{title:"使用教程",items:le.value.map(e=>e.title)},{title:"临床要点",items:se.value.map(e=>e.title)},{title:"用户指南",items:ae.value.map(e=>e.title)}];n(`${R.value.title} 专题摘要`,e)},ue=e=>{const l=document.querySelector({products:"#topic-products",tutorials:"#topic-tutorials",clinical:"#topic-clinical",user:"#topic-user"}[e]);l&&l.scrollIntoView({behavior:"smooth",block:"start"})};return v(async()=>{const[e,l]=await Promise.all([s(),a()]);O.value=e,Q.value=l}),(e,l)=>{var s,a;const t=g("el-card"),i=g("el-button"),c=g("el-col"),n=g("el-row");return j(),p("div",b,[m("div",A,[m("h1",null,f((null==(s=R.value)?void 0:s.title)||"专题"),1),m("p",null,f((null==(a=R.value)?void 0:a.description)||"按主题聚合的产品、教程与临床要点。"),1)]),h(t,{class:"topic-stats",shadow:"hover"},{default:k(()=>[m("div",D,[m("span",S,f(te.value.products),1),l[4]||(l[4]=m("span",{class:"stat-label"},"产品",-1))]),m("div",$,[m("span",z,f(te.value.tutorials),1),l[5]||(l[5]=m("span",{class:"stat-label"},"教程",-1))]),m("div",I,[m("span",T,f(te.value.clinical),1),l[6]||(l[6]=m("span",{class:"stat-label"},"临床",-1))]),m("div",B,[m("span",F,f(te.value.user),1),l[7]||(l[7]=m("span",{class:"stat-label"},"用户",-1))])]),_:1}),h(t,{class:"topic-actions",shadow:"hover"},{default:k(()=>[m("div",G,[l[9]||(l[9]=m("div",null,[m("h3",null,"专题摘要"),m("p",null,"面向不同角色的核心要点与建议。")],-1)),h(i,{type:"primary",onClick:ce},{default:k(()=>[...l[8]||(l[8]=[_("导出专题 PDF",-1)])]),_:1})]),m("div",q,[h(i,{size:"small",plain:"",onClick:l[0]||(l[0]=e=>ue("products"))},{default:k(()=>[...l[10]||(l[10]=[_("产品清单",-1)])]),_:1}),h(i,{size:"small",plain:"",onClick:l[1]||(l[1]=e=>ue("tutorials"))},{default:k(()=>[...l[11]||(l[11]=[_("使用教程",-1)])]),_:1}),h(i,{size:"small",plain:"",onClick:l[2]||(l[2]=e=>ue("clinical"))},{default:k(()=>[...l[12]||(l[12]=[_("临床要点",-1)])]),_:1}),h(i,{size:"small",plain:"",onClick:l[3]||(l[3]=e=>ue("user"))},{default:k(()=>[...l[13]||(l[13]=[_("用户指南",-1)])]),_:1})]),m("div",H,[m("div",null,[l[14]||(l[14]=m("h4",null,"核心人群",-1)),m("ul",null,[(j(!0),p(w,null,C(X.value.audiences,e=>(j(),p("li",{key:e},f(e),1))),128))])]),m("div",null,[l[15]||(l[15]=m("h4",null,"典型场景",-1)),m("ul",null,[(j(!0),p(w,null,C(X.value.scenarios,e=>(j(),p("li",{key:e},f(e),1))),128))])]),m("div",null,[l[16]||(l[16]=m("h4",null,"关键设备",-1)),m("ul",null,[(j(!0),p(w,null,C(X.value.devices,e=>(j(),p("li",{key:e},f(e),1))),128))])])])]),_:1}),ee.value.length?(j(),p("div",L,[l[17]||(l[17]=m("h2",null,"关联产品",-1)),h(n,{gutter:20},{default:k(()=>[(j(!0),p(w,null,C(ee.value,e=>(j(),P(c,{xs:24,sm:12,md:8,key:e.id},{default:k(()=>[h(u,{product:e,"show-compare":!1,onDetail:l=>{return s=e.id,void M.push(`/product/${s}`);var s}},null,8,["product","onDetail"])]),_:2},1024))),128))]),_:1})])):y("",!0),le.value.length?(j(),p("div",N,[l[18]||(l[18]=m("h2",null,"使用教程",-1)),h(n,{gutter:20},{default:k(()=>[(j(!0),p(w,null,C(le.value,e=>(j(),P(c,{xs:24,sm:12,md:8,key:e.id},{default:k(()=>[h(t,{shadow:"hover",class:"info-card",onClick:l=>{return s=e.id,void M.push(`/tutorial/${s}`);var s}},{default:k(()=>{return[m("h3",null,f(e.title),1),m("p",null,f(e.category)+" · "+f(e.difficulty),1),m("p",V,f((l=e.content,l?l.length>90?`${l.slice(0,90)}...`:l:"")),1)];var l}),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):y("",!0),se.value.length?(j(),p("div",U,[l[19]||(l[19]=m("h2",null,"临床要点",-1)),h(n,{gutter:20},{default:k(()=>[(j(!0),p(w,null,C(se.value,e=>(j(),P(c,{xs:24,sm:12,md:8,key:e.id},{default:k(()=>[h(t,{shadow:"hover",class:"info-card",onClick:l=>ie(`/clinical/${e.id}`)},{default:k(()=>[m("h3",null,f(e.title),1),m("p",null,f(e.category)+" · "+f(e.level)+" · "+f(e.docType),1),m("p",E,f(e.summary),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):y("",!0),ae.value.length?(j(),p("div",J,[l[20]||(l[20]=m("h2",null,"用户指南",-1)),h(n,{gutter:20},{default:k(()=>[(j(!0),p(w,null,C(ae.value,e=>(j(),P(c,{xs:24,sm:12,md:8,key:e.id},{default:k(()=>[h(t,{shadow:"hover",class:"info-card",onClick:l=>ie(`/user-knowledge/${e.id}`)},{default:k(()=>[m("h3",null,f(e.title),1),m("p",null,f(e.category)+" · "+f(e.level)+" · "+f(e.docType),1),m("p",K,f(e.summary),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})])):y("",!0)])}}}),[["__scopeId","data-v-e9723521"]]);export{M as default};
