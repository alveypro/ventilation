import{d as e,r as l,C as a,w as n,c as t,f as s,t as i,g as r,j as o,D as d,l as u,k as c,F as p,v,x as m,y as h,q as f,u as g,E as y,H as k}from"./element-0EaUjS1Y.js";import{u as b,b as $}from"./vue-B0d-ytHW.js";import{f as _}from"./dataService-CQiVhu7t.js";import{s as x,l as j}from"./storage-CA1yM9sP.js";import{f as w}from"./helpers-DDI8N1dV.js";import{_ as P}from"./index-uDOMh21w.js";import"./index-CNMiXLCw.js";import"./vendor-VSpmzgsF.js";const C={class:"compare-page"},A={class:"compare-guide-grid"},T={class:"guide-item"},R={class:"icon"},E={class:"placeholder"},z={key:4,class:"compare-table"},L={class:"table-wrapper"},S={class:"comparison-table"},M={class:"product-header"},O={class:"product-image"},V={class:"price"},D={class:"property-col"},F={class:"scenario-grid"},I={class:"scenario-meta"},N={class:"scenario-tags"},H={key:0,class:"placeholder"},U={class:"report-content"},q={class:"report-actions"},B={class:"advantages"},K={key:0,class:"disadvantages"},G=P(e({__name:"Compare",setup(e){const P=b(),G=$(),J=l([]),Q=l(!0),W=l([]),X=l([{icon:"ğŸ§©",title:"çœ‹é€‚é…æ€§",description:"ä¼˜å…ˆå¯¹æ¯”é€‚ç”¨ç–¾ç—…ã€æ¨¡å¼ä¸å‹åŠ›èŒƒå›´ã€‚"},{icon:"ğŸ”‡",title:"çœ‹èˆ’é€‚åº¦",description:"å™ªéŸ³ã€åŠ æ¹¿ä¸é¢ç½©å…¼å®¹å†³å®šä½¿ç”¨ä½“éªŒã€‚"},{icon:"ğŸ“ˆ",title:"çœ‹é•¿æœŸæˆæœ¬",description:"æ»¤ç½‘ã€é¢ç½©ã€ç®¡è·¯æ›´æ¢å‘¨æœŸå½±å“æ€»æˆæœ¬ã€‚"},{icon:"ğŸ§ ",title:"çœ‹æ•°æ®èƒ½åŠ›",description:"äº‘ç«¯æ•°æ®ã€ä¾ä»æ€§è¿½è¸ªå¯¹é•¿æœŸç®¡ç†å¾ˆå…³é”®ã€‚"}]),Y=l(["æ˜ç¡®ä½¿ç”¨åœºæ™¯ï¼šå±…å®¶ã€æ—…è¡Œæˆ–æ…¢ç—…é•¿æœŸç®¡ç†ã€‚","ç¡®è®¤éœ€æ±‚æ¨¡å¼ï¼šCPAP/APAP/BiPAP/NIVã€‚","å‡†å¤‡å¯¹æ¯”å‚æ•°ï¼šå‹åŠ›èŒƒå›´ã€åŠ æ¹¿ã€å™ªéŸ³ã€æ•°æ®èƒ½åŠ›ã€‚","è®¾å®šé¢„ç®—ä¸è€—æå¯è·å¾—æ€§ã€‚"]),Z=l(["ä¼˜å…ˆçœ‹â€œé€‚åº”è¯+æ¨¡å¼â€æ˜¯å¦åŒ¹é…ã€‚","èˆ’é€‚åº¦ä¸æ¼æ°”æ§åˆ¶å†³å®šèƒ½å¦åšæŒã€‚","æ•°æ®èƒ½åŠ›å½±å“éšè®¿ä¸å¤è¯„ã€‚","ä¸è¦åªçœ‹ä»·æ ¼ï¼Œå…³æ³¨é•¿æœŸæˆæœ¬ã€‚"]);a(async()=>{J.value=await _(),Q.value=!1});n(()=>P.query.ids,()=>{const e=j("compare-ids",[]),l=(a=P.query.ids)?(Array.isArray(a)?a.join(","):String(a)).split(",").map(e=>Number(e)).filter(e=>Number.isFinite(e)):[];var a;const n=Array.from(new Set([...e,...l]));W.value=n.slice(0,4)},{immediate:!0}),n(W,()=>{x("compare-ids",W.value)},{deep:!0});const ee=t(()=>J.value.filter(e=>W.value.includes(e.id))),le=t(()=>W.value.length>=2),ae=(e,l,a)=>{const n={};ee.value.forEach(e=>{n[e.id]=a(e)||"â€”"});const t=ee.value.length>1&&new Set(Object.values(n)).size>1;return{key:e,label:l,values:n,diff:t}},ne=t(()=>{if(0===ee.value.length)return[];const e=[ae("deviceType","è®¾å¤‡ç±»å‹",e=>"PAP_SLEEP"===e.deviceType?"ç¡çœ PAP":"NIV_HOME"===e.deviceType?"å®¶ç”¨NIV":"PAP_TRAVEL"===e.deviceType?"ä¾¿æº/æ—…è¡Œ":e.type),ae("modeTags","æ”¯æŒæ¨¡å¼",e=>{var l;return(null==(l=e.modeTags)?void 0:l.join(" / "))||""}),ae("scenarioTags","åº”ç”¨åœºæ™¯",e=>{var l;return(null==(l=e.scenarioTags)?void 0:l.join(" / "))||""}),ae("platformFamily","å¹³å°å®¶æ—",e=>e.platformFamily||""),ae("epap","å‹åŠ›èŒƒå›´",e=>{var l;return void 0!==e.epapMin&&void 0!==e.epapMax?`${e.epapMin}-${e.epapMax} cmH2O`:(null==(l=e.specs)?void 0:l.EPAP)||""}),ae("ipap","IPAP ä¸Šé™",e=>{var l;return e.ipapMax?`${e.ipapMax} cmH2O`:(null==(l=e.specs)?void 0:l["IPAPä¸Šé™"])||""}),ae("backupRate","åå¤‡é¢‘ç‡",e=>void 0===e.backupRate?"":e.backupRate?"æ”¯æŒ":"ä¸æ”¯æŒ"),ae("targetVentilation","ç›®æ ‡é€šæ°”",e=>void 0===e.targetVentilation?"":e.targetVentilation?"æ”¯æŒ":"ä¸æ”¯æŒ"),ae("humidifier","æ¹¿åŒ–å™¨",e=>e.humidifier||""),ae("heatedTube","åŠ æ¸©ç®¡è·¯",e=>e.heatedTube||""),ae("connectivity","è¿æ¥æ–¹å¼",e=>{var l;return(null==(l=e.connectivity)?void 0:l.join(" / "))||""}),ae("channels","æ¸ é“",e=>{var l;return(null==(l=e.channels)?void 0:l.join(" / "))||""}),ae("refurbRisk","ç¿»æ–°é£é™©",e=>e.refurbRisk||""),ae("overclaimRisk","å¤¸å¤§é£é™©",e=>e.overclaimRisk||""),ae("weight","é‡é‡",e=>e.weightKg?`${e.weightKg} kg`:""),ae("noise","å™ªéŸ³",e=>e.noiseDb||"")],l=new Set;return ee.value.forEach(e=>{Object.keys(e.specs||{}).forEach(e=>l.add(e))}),l.forEach(l=>{e.some(e=>e.label===l)||e.push(ae(`spec-${l}`,l,e=>{var a;return(null==(a=e.specs)?void 0:a[l])||""}))}),e}),te=t(()=>{var e;if(0===ee.value.length)return{recommended:"",reasons:[]};const l=[...ee.value].sort((e,l)=>(l.dataCompleteness||0)-(e.dataCompleteness||0))[0],a=[`èµ„æ–™å®Œæ•´åº¦ ${l.dataCompleteness||0}%`,`é€‚ç”¨ç±»å‹ï¼š${l.type}`,`æ”¯æŒæ¨¡å¼ï¼š${(null==(e=l.modeTags)?void 0:e.join(" / "))||"â€”"}`];return{recommended:l.name,reasons:a}}),se=()=>{const e=(()=>{const e=`å‘¼å¸æœºå¯¹æ¯”æŠ¥å‘Š\nç”Ÿæˆæ—¶é—´ï¼š${(new Date).toLocaleString()}`,l=ee.value.map(e=>`- ${e.name}ï¼ˆ${w(e.price)}ï¼‰`).join("\n"),a=ne.value.map(e=>{const l=ee.value.map(l=>`${l.name}: ${e.values[l.id]||"â€”"}`).join(" | ");return`${e.label}: ${l}`}).join("\n"),n=te.value.reasons.map(e=>`- ${e}`).join("\n");return`${e}\n\nå¯¹æ¯”æœºå‹ï¼š\n${l}\n\nå¹³å°å®¶æ—ï¼š\n${ee.value.map(e=>`- ${e.name}: ${e.platformFamily||"â€”"}`).join("\n")}\n\næ ¸å¿ƒå‚æ•°ï¼š\n${a}\n\næ¨èç»“è®ºï¼š\n${te.value.recommended}\nç†ç”±ï¼š\n${n}\n`})(),l=new Blob([e],{type:"text/plain;charset=utf-8"}),a=document.createElement("a");a.href=URL.createObjectURL(l),a.download="compare-report.txt",a.click(),URL.revokeObjectURL(a.href)},ie=()=>{const e=`\n    <html>\n      <head>\n        <title>å¯¹æ¯”æŠ¥å‘Š</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 24px; color: #333; }\n          h1 { font-size: 20px; margin-bottom: 12px; }\n          h2 { font-size: 16px; margin: 16px 0 8px; }\n          table { width: 100%; border-collapse: collapse; margin-top: 10px; }\n          th, td { border: 1px solid #ddd; padding: 8px; font-size: 12px; }\n          th { background: #f5f7fa; text-align: left; }\n        </style>\n      </head>\n      <body>\n        <h1>å‘¼å¸æœºå¯¹æ¯”æŠ¥å‘Š</h1>\n        <div>ç”Ÿæˆæ—¶é—´ï¼š${(new Date).toLocaleString()}</div>\n        <h2>å¯¹æ¯”æœºå‹</h2>\n        <ul>${ee.value.map(e=>`<li>${e.name}ï¼ˆ${w(e.price)}ï¼‰</li>`).join("")}</ul>\n        <h2>æ ¸å¿ƒå‚æ•°</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>å‚æ•°</th>\n              ${ee.value.map(e=>`<th>${e.name}</th>`).join("")}\n            </tr>\n          </thead>\n          <tbody>\n            ${ne.value.map(e=>`\n              <tr>\n                <td>${e.label}</td>\n                ${ee.value.map(l=>`<td>${e.values[l.id]||"â€”"}</td>`).join("")}\n              </tr>\n            `).join("")}\n          </tbody>\n        </table>\n        <h2>æ¨èç»“è®º</h2>\n        <div><strong>${te.value.recommended||"â€”"}</strong></div>\n        <ul>${te.value.reasons.map(e=>`<li>${e}</li>`).join("")}</ul>\n      </body>\n    </html>\n  `,l=window.open("","_blank");l&&(l.document.write(e),l.document.close(),l.focus(),l.print())},re=e=>{W.value.includes(e)?W.value=W.value.filter(l=>l!==e):W.value.length<4&&W.value.push(e)},oe=()=>{W.value=[]};return(e,l)=>{const a=u("el-alert"),n=u("el-card"),t=u("el-col"),b=u("el-row"),$=u("el-button"),_=u("el-skeleton"),x=u("el-empty"),j=u("el-tag");return f(),s("div",C,[l[17]||(l[17]=i("div",{class:"page-header handbook"},[i("p",{class:"header-label"},"äº§å“å¯¹æ¯”"),i("h1",null,"å‚æ•°ä¸å·®å¼‚å¯¹ç…§"),i("p",null,"èšç„¦å…³é”®å‚æ•°ä¸é€‚ç”¨åœºæ™¯å·®å¼‚ã€‚")],-1)),r(a,{title:"é€‰æ‹©2-4ä¸ªäº§å“è¿›è¡Œå¯¹æ¯”",type:"info",closable:!1,style:{"margin-bottom":"20px"}}),i("section",A,[r(b,{gutter:20},{default:c(()=>[r(t,{xs:24,md:12},{default:c(()=>[r(n,{shadow:"hover",class:"guide-block"},{default:c(()=>[l[0]||(l[0]=i("h3",null,"å¯¹æ¯”å‰å‡†å¤‡",-1)),i("ul",null,[(f(!0),s(p,null,v(Y.value,e=>(f(),s("li",{key:e},h(e),1))),128))])]),_:1})]),_:1}),r(t,{xs:24,md:12},{default:c(()=>[r(n,{shadow:"hover",class:"guide-block"},{default:c(()=>[l[1]||(l[1]=i("h3",null,"å¦‚ä½•è¯»ç»“è®º",-1)),i("ul",null,[(f(!0),s(p,null,v(Z.value,e=>(f(),s("li",{key:e},h(e),1))),128))])]),_:1})]),_:1})]),_:1})]),le.value?d("",!0):(f(),o(n,{key:0,class:"compare-guide"},{header:c(()=>[...l[2]||(l[2]=[i("span",null,"å¯¹æ¯”æŒ‡å—",-1)])]),default:c(()=>[r(b,{gutter:20},{default:c(()=>[(f(!0),s(p,null,v(X.value,e=>(f(),o(t,{xs:24,sm:12,md:6,key:e.title},{default:c(()=>[i("div",T,[i("div",R,h(e.icon),1),i("div",null,[i("h4",null,h(e.title),1),i("p",null,h(e.description),1)])])]),_:2},1024))),128))]),_:1})]),_:1})),!le.value&&J.value.length?(f(),o(n,{key:1,class:"product-selector"},{header:c(()=>[...l[3]||(l[3]=[i("span",null,"é€‰æ‹©è¦å¯¹æ¯”çš„äº§å“",-1)])]),default:c(()=>[r(b,{gutter:20},{default:c(()=>[(f(!0),s(p,null,v(J.value,e=>(f(),o(t,{xs:24,sm:12,md:6,key:e.id},{default:c(()=>[r(n,{shadow:"hover",class:"product-option",onClick:l=>re(e.id)},{default:c(()=>[i("div",E,h(e.brand),1),i("h4",null,h(e.name),1),i("p",null,h(g(w)(e.price)),1),r($,{type:"primary",size:"small",onClick:y(l=>re(e.id),["stop"])},{default:c(()=>[...l[4]||(l[4]=[m(" é€‰æ‹© ",-1)])]),_:1},8,["onClick"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):d("",!0),Q.value?(f(),o(b,{key:2,gutter:20,class:"products-grid"},{default:c(()=>[(f(),s(p,null,v(8,e=>r(t,{xs:24,sm:12,md:6,key:e},{default:c(()=>[r(_,{rows:5})]),_:1})),64))]),_:1})):d("",!0),Q.value||J.value.length?d("",!0):(f(),o(x,{key:3,description:"æš‚æ— å¯å¯¹æ¯”äº§å“"})),le.value?(f(),s("div",z,[r($,{onClick:oe,class:"clear-btn"},{default:c(()=>[...l[5]||(l[5]=[m("æ¸…é™¤é€‰æ‹©",-1)])]),_:1}),i("div",L,[i("table",S,[i("thead",null,[i("tr",null,[l[8]||(l[8]=i("th",{class:"property-col"},"è§„æ ¼å‚æ•°",-1)),(f(!0),s(p,null,v(ee.value,e=>(f(),s("th",{key:e.id,class:"product-col"},[i("div",M,[i("div",O,h(e.brand),1),i("h4",null,h(e.name),1),i("p",V,h(g(w)(e.price)),1),r($,{type:"primary",size:"small",onClick:l=>{return a=e.id,void G.push(`/product/${a}`);var a}},{default:c(()=>[...l[6]||(l[6]=[m(" æŸ¥çœ‹è¯¦æƒ… ",-1)])]),_:1},8,["onClick"]),r($,{size:"small",onClick:l=>{return a=e.id,void(W.value=W.value.filter(e=>e!==a));var a}},{default:c(()=>[...l[7]||(l[7]=[m("ç§»é™¤",-1)])]),_:1},8,["onClick"])])]))),128))])]),i("tbody",null,[(f(!0),s(p,null,v(ne.value,e=>(f(),s("tr",{key:e.key},[i("td",D,h(e.label),1),(f(!0),s(p,null,v(ee.value,l=>(f(),s("td",{key:l.id,class:"product-col"},[i("span",{class:k({"diff-cell":e.diff})},h(e.values[l.id]||"â€”"),3)]))),128))]))),128))])])]),r(n,{class:"scenario-compare",style:{"margin-top":"20px"}},{header:c(()=>[...l[9]||(l[9]=[i("span",null,"åº”ç”¨åœºæ™¯å¯¹æ¯”",-1)])]),default:c(()=>[i("div",F,[(f(!0),s(p,null,v(ee.value,e=>(f(),s("div",{key:e.id,class:"scenario-card"},[i("h4",null,h(e.name),1),i("p",I,h(e.brand)+" Â· "+h(g(w)(e.price)),1),i("div",N,[(f(!0),s(p,null,v(e.scenarioTags||[],e=>(f(),o(j,{key:e,size:"small",type:"info"},{default:c(()=>[m(h(e),1)]),_:2},1024))),128)),e.scenarioTags&&e.scenarioTags.length?d("",!0):(f(),s("span",H,"åœºæ™¯å¾…è¡¥å……"))])]))),128))])]),_:1}),r(n,{class:"compare-report",style:{"margin-top":"20px"}},{header:c(()=>[...l[10]||(l[10]=[i("span",null,"å¯¹æ¯”ç»“è®º",-1)])]),default:c(()=>[i("div",U,[i("p",null,[l[11]||(l[11]=m("æ¨èæœºå‹ï¼š",-1)),i("strong",null,h(te.value.recommended||"â€”"),1)]),l[14]||(l[14]=i("p",null,"æ¨èç†ç”±ï¼š",-1)),i("ul",null,[(f(!0),s(p,null,v(te.value.reasons,e=>(f(),s("li",{key:e},h(e),1))),128))]),i("div",q,[r($,{type:"primary",size:"small",onClick:se},{default:c(()=>[...l[12]||(l[12]=[m("ä¸‹è½½å¯¹æ¯”æŠ¥å‘Š",-1)])]),_:1}),r($,{size:"small",onClick:ie},{default:c(()=>[...l[13]||(l[13]=[m("æ‰“å°/å¯¼å‡ºPDF",-1)])]),_:1})])])]),_:1}),r(b,{gutter:20,class:"advantages-comparison",style:{"margin-top":"30px"}},{default:c(()=>[(f(!0),s(p,null,v(ee.value,e=>(f(),o(t,{xs:24,md:12,key:e.id},{default:c(()=>[r(n,null,{header:c(()=>[i("span",null,h(e.name),1)]),default:c(()=>{var a,n,t;return[i("div",B,[l[15]||(l[15]=i("h4",null,"âœ“ ä¼˜ç‚¹",-1)),i("ul",null,[(f(!0),s(p,null,v(null==(a=e.advantages)?void 0:a.slice(0,3),(e,l)=>(f(),s("li",{key:l},h(e),1))),128))])]),(null==(n=e.disadvantages)?void 0:n.length)?(f(),s("div",K,[l[16]||(l[16]=i("h4",null,"âœ— ç¼ºç‚¹",-1)),i("ul",null,[(f(!0),s(p,null,v(null==(t=e.disadvantages)?void 0:t.slice(0,3),(e,l)=>(f(),s("li",{key:l},h(e),1))),128))])])):d("",!0)]}),_:2},1024)]),_:2},1024))),128))]),_:1})])):d("",!0)])}}}),[["__scopeId","data-v-1f96e0c6"]]);export{G as default};
